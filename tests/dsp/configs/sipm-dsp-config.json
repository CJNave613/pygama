{
  "outputs": ["energies", "trigger_pos"],
  "processors": {
    "wf_gaus": {
      "function": "gaussian_filter1d",
      "module": "pygama.dsp.processors.gaussian_filter1d",
      "args": ["waveform", "wf_gaus(len(waveform))"],
      "init_args": ["1", "4.0"],
      "unit": "ADC"
    },
    "curr": {
      "function": "avg_current",
      "module": "pygama.dsp.processors.moving_windows",
      "args": ["wf_gaus", 5, "curr(len(wf_gaus)-5)"],
      "unit": "ADC"
    },
    "wf_hist_c , wf_borders_c": {
      "function": "histogram",
      "module": "pygama.dsp.processors.histogram",
      "args": ["curr","[100]","wf_hist_c(100)", "wf_borders_c(101)"],
      "unit": ["ADC", "ADC"]
    },
    "bl_std_c, idx_out_c, max_out": {
      "function": "histogram_stats",
      "module": "pygama.dsp.processors.histogram",
      "args": [
        "wf_hist_c",
        "wf_borders_c",
        "idx_out_c",
        "max_out",
        "bl_std_c",
        "np.nan"
      ],
      "unit": ["ADC", "ADC", "none"]
    },
    "vt_max_candidate_out, vt_min_out, n_max_out, n_min_out, flag_out": {
      "function": "get_multi_local_extrema",
      "module": "pygama.dsp.processors.get_multi_local_extrema",
      "args": [
        "curr",
        5,
        "3*bl_std_c",
        0,
        "vt_max_candidate_out(20)",
        "vt_min_out(20)",
        "n_max_out",
        "n_min_out",
        "flag_out"
      ],
      "unit": ["ns", "ns", "none", "none", "none"]
    },
    "trigger_pos, no_out": {
      "function": "peak_snr_threshold",
      "module": "pygama.dsp.processors.peak_snr_threshold",
      "args": ["curr", "vt_max_candidate_out", 0.8, 10, "trigger_pos", "no_out"]
    },
    "energies": {
      "function": "multi_a_filter",
      "module": "pygama.dsp.processors.multi_a_filter",
      "args": ["curr", "trigger_pos", "energies"]
    }
  }
}
